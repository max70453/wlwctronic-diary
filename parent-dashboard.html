<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/footer.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mui/icons-material@5.11.0/fonts/index.css" />
    <!-- –í–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/global.css">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mui/icons-material@5.11.0/fonts/index.css" />
    <style>
        /* Header —Å—Ç–∏–ª–∏ */
        .header-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 70px;
        }

        .logo-section {
            display: flex;
            align-items: center;
        }

        .logo {
            text-decoration: none;
            display: flex;
            align-items: center;
            color: white;
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-section {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .parent-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .parent-details h2 {
            margin: 0 0 10px 0;
            font-size: 1.8rem;
        }

        .parent-details p {
            margin: 5px 0;
            opacity: 0.9;
        }

        .child-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .child-info h3 {
            margin: 0 0 8px 0;
            font-size: 1.2rem;
        }

        .stats-row {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 10px 15px;
            border-radius: 6px;
            text-align: center;
            flex: 1;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .section {
            border: 1px solid #e1e5e9;
            border-radius: 12px;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .section h2 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.4rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .grades-table, .attendance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .grades-table th, .grades-table td, .attendance-table th, .attendance-table td {
            border: 1px solid #e1e5e9;
            padding: 12px;
            text-align: left;
        }

        .grades-table th, .attendance-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .grades-table tr:hover, .attendance-table tr:hover {
            background-color: #f8f9fa;
        }

        .grade-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.9rem;
            display: inline-block;
            min-width: 30px;
            text-align: center;
        }

        .grade-excellent { background: #d4edda; color: #155724; }
        .grade-good { background: #cce5ff; color: #004085; }
        .grade-satisfactory { background: #fff3cd; color: #856404; }
        .grade-poor { background: #f8d7da; color: #721c24; }
        .grade-default { background: #e2e3e5; color: #383d41; }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-block;
        }

        .status-present { background: #d4edda; color: #155724; }
        .status-absent { background: #f8d7da; color: #721c24; }
        .status-late { background: #fff3cd; color: #856404; }
        .status-default { background: #e2e3e5; color: #383d41; }

        .notification-item {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            transition: all 0.3s ease;
        }

        .notification-item.unread {
            background: #e7f3ff;
            border-left-color: #0066cc;
        }

        .notification-item:hover {
            transform: translateX(5px);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .notification-icon {
            font-size: 1.2rem;
            margin-right: 8px;
        }

        .notification-type {
            font-weight: 600;
            color: #495057;
        }

        .notification-date {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .notification-indicator {
            width: 8px;
            height: 8px;
            background: #0066cc;
            border-radius: 50%;
            display: inline-block;
        }

        .notification-content {
            color: #495057;
            line-height: 1.5;
        }

        .notification-actions {
            margin-top: 10px;
        }

        .btn-mark-read {
            background: #667eea;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .btn-mark-read:hover {
            background: #5a6fd8;
        }

        .messages-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .messages-form label {
            font-weight: 600;
            color: #495057;
        }

        .messages-form select, .messages-form textarea {
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .messages-form select:focus, .messages-form textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.25);
        }

        .messages-form textarea {
            min-height: 100px;
            resize: vertical;
        }

        .messages-form button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .messages-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .announcement-item {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
            transition: all 0.3s ease;
        }

        .announcement-item.important {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .announcement-item:hover {
            transform: translateX(5px);
        }

        .announcement-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .announcement-title {
            margin: 0;
            color: #2c3e50;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .important-badge {
            background: #dc3545;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .announcement-date {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .announcement-content {
            color: #495057;
            line-height: 1.6;
        }

        .toast-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }

        .toast-notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .toast-notification.success {
            background: #28a745;
        }

        .toast-notification.error {
            background: #dc3545;
        }

        .toast-notification.info {
            background: #17a2b8;
        }

              /* Footer */
        .footer {
            background-color: #1e283c;
            color: white;
            padding: 40px 20px 20px;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-section h4 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: white;
        }

        .footer-section p, .footer-section a {
            color: #ccc;
            text-decoration: none;
            margin-bottom: 10px;
            display: block;
            font-size: 0.9rem;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid #333;
            margin-top: 30px;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #999;
        }

        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                padding: 10px;
            }

            .header-section {
                grid-column: 1;
            }

            .parent-info {
                flex-direction: column;
            }

            .stats-row {
                flex-direction: column;
            }

            .grades-table, .attendance-table {
                font-size: 0.9rem;
            }

            .grades-table th, .grades-table td, .attendance-table th, .attendance-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Material-UI AppBar -->
    <div id="app-bar"></div>

    <main>
        <div class="dashboard-container">
            <!-- Header section with parent information -->
            <section class="header-section">
                <div class="parent-info">
                    <div class="parent-details">
                        <h2 id="parent-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                        <p>üìß <span id="parent-email">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                        <p>üì± <span id="parent-phone">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                    </div>
                    <div class="child-info">
                        <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–±–µ–Ω–∫–µ</h3>
                        <p><strong>–ò–º—è:</strong> <span id="child-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                        <p><strong>–ö–ª–∞—Å—Å:</strong> <span id="child-class">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                        <div class="stats-row">
                            <div class="stat-item">
                                <span class="stat-value" id="average-grade">0</span>
                                <span class="stat-label">–°—Ä. –±–∞–ª–ª</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="attendance-percentage">0%</span>
                                <span class="stat-label">–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="homework-count">0</span>
                                <span class="stat-label">–î–ó</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</h2>
                <table class="grades-table" id="grades-table">
                    <thead>
                        <tr>
                            <th>–ü—Ä–µ–¥–º–µ—Ç</th>
                            <th>–û—Ü–µ–Ω–∫–∞</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–¢–µ–º–∞ —É—Ä–æ–∫–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </tbody>
                </table>
            </section>

            <section class="section">
                <h2>–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</h2>
                <table class="attendance-table" id="attendance-table">
                    <thead>
                        <tr>
                            <th>–î–∞—Ç–∞</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–£—Ä–æ–∫–æ–≤</th>
                            <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </tbody>
                </table>
            </section>

            <section class="section">
                <h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                <div id="notifications-container">
                    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>

            <section class="section">
                <h2>–°–≤—è–∑—å —Å —É—á–∏—Ç–µ–ª—è–º–∏</h2>
                <form class="messages-form" id="message-form">
                    <label for="teacher">–£—á–∏—Ç–µ–ª—å:</label>
                    <select id="teacher" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∏—Ç–µ–ª—è</option>
                        <!-- –°–ø–∏—Å–æ–∫ —É—á–∏—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </select>
                    <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
                    <textarea id="message" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª—é..."></textarea>
                    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                </form>
            </section>
        </div>
        <section class="section" style="margin: 0 20px;">
            <h2 data-heading-tag="H2">–®–∫–æ–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
            <div id="announcements-container"><div class="announcement-item important">
        <div class="announcement-header">
            <h4 class="announcement-title">
                –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—Ä–∞–Ω–∏–µ
                <span class="important-badge">–í–∞–∂–Ω–æ</span>
            </h4>
            <div class="announcement-date">18 —è–Ω–≤–∞—Ä—è 2026 –≥.</div>
        </div>
        <div class="announcement-content">–£–≤–∞–∂–∞–µ–º—ã–µ —Ä–æ–¥–∏—Ç–µ–ª–∏! –°–æ—Å—Ç–æ–∏—Ç—Å—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—Ä–∞–Ω–∏–µ 25 —è–Ω–≤–∞—Ä—è –≤ 18:00 –≤ –∞–∫—Ç–æ–≤–æ–º –∑–∞–ª–µ —à–∫–æ–ª—ã. –ü—Ä–∏–≥–ª–∞—à–∞—é—Ç—Å—è –≤—Å–µ –∂–µ–ª–∞—é—â–∏–µ.</div>
    </div><div class="announcement-item important">
        <div class="announcement-header">
            <h4 class="announcement-title">
                –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
                <span class="important-badge">–í–∞–∂–Ω–æ</span>
            </h4>
            <div class="announcement-date">17 —è–Ω–≤–∞—Ä—è 2026 –≥.</div>
        </div>
        <div class="announcement-content">–ó–∞–≤—Ç—Ä–∞, 18 —è–Ω–≤–∞—Ä—è, —É—Ä–æ–∫–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –≤ 9:00 –≤–º–µ—Å—Ç–æ 8:30 –∏–∑-–∑–∞ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–≤–µ—Ç–∞.</div>
    </div><div class="announcement-item ">
        <div class="announcement-header">
            <h4 class="announcement-title">
                –®–∫–æ–ª—å–Ω–∞—è –æ–ª–∏–º–ø–∏–∞–¥–∞
                
            </h4>
            <div class="announcement-date">20 —è–Ω–≤–∞—Ä—è 2026 –≥.</div>
        </div>
        <div class="announcement-content">–ü—Ä–∏–≥–ª–∞—à–∞–µ–º —É—á–µ–Ω–∏–∫–æ–≤ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ —à–∫–æ–ª—å–Ω–æ–π –æ–ª–∏–º–ø–∏–∞–¥–µ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Å—Ç–æ–∏—Ç—Å—è 15 —Ñ–µ–≤—Ä–∞–ª—è. –ó–∞—è–≤–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –¥–æ 10 —Ñ–µ–≤—Ä–∞–ª—è —É –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.</div>
    </div><div class="announcement-item ">
        <div class="announcement-header">
            <h4 class="announcement-title">
                –≠–∫—Å–∫—É—Ä—Å–∏—è –≤ –º—É–∑–µ–π
                
            </h4>
            <div class="announcement-date">19 —è–Ω–≤–∞—Ä—è 2026 –≥.</div>
        </div>
        <div class="announcement-content">–£–≤–∞–∂–∞–µ–º—ã–µ —É—á–µ–Ω–∏–∫–∏ 10-—Ö –∫–ª–∞—Å—Å–æ–≤! 30 —è–Ω–≤–∞—Ä—è –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç—Å—è —ç–∫—Å–∫—É—Ä—Å–∏—è –≤ –º—É–∑–µ–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∏–∫–∏. –°—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞ 200 —Ä—É–±–ª–µ–π. –ó–∞–ø–∏—Å—å —É –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.</div>
    </div></div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>E-Journal</h4>
                <p>–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–µ–±–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º</p>
            </div>
            <div class="footer-section">
                <h4>–°—Å—ã–ª–∫–∏</h4>
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#">–û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</a>
                <a href="#">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
                <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            </div>
            <div class="footer-section">
                <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                <p><i class="material-icons" style="font-size: 1rem; vertical-align: middle;">email</i> info@E-Journal.ru</p>
                <p><i class="material-icons" style="font-size: 1rem; vertical-align: middle;">phone</i> +7 (123) 456-78-90</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 E-Journal. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/parent-dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mui/material@5.11.0/umd/material-ui.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mui/icons-material@5.11.0/umd/material-ui-icons.production.min.js"></script>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AppBar —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
        document.addEventListener('DOMContentLoaded', function() {
            const appBar = document.getElementById('app-bar');
            const teacherId = localStorage.getItem('teacherId') || 'teacher1';

            appBar.className = 'app-bar';
            appBar.innerHTML = `
                <div class="MuiAppBar-root MuiAppBar-positionStatic" style="background: linear-gradient(90deg, #3f51b5 0%, #303f9f 100%);">
                    <div class="MuiToolbar-root MuiToolbar-regular" style="min-height: 64px; padding: 0 24px; display: flex; justify-content: space-between; align-items: center;">
                        <a href="index.html" class="logo">
                            <i class="material-icons logo-icon" style="font-size: 2rem; margin-right: 10px; color: #ffd700;">menu_book</i>
                            <span>
                                <strong>E-Journal</strong><br>
                                <small style="font-size: 0.8rem; opacity: 0.8;"></small>
                            </span>
                        </a>
                        <div style="display: flex; gap: 10px;">
                            <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                            <button class="logout-btn" onclick="logout()">
                                <i class="material-icons" style="font-size: 1rem; vertical-align: middle; margin-right: 5px;">logout</i>
                                –í—ã–π—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
            loadTeacherDashboard(teacherId);
        });

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞
        function loadTeacherDashboard(teacherId) {
            console.log('=== –ó–ê–ì–†–£–ó–ö–ê –î–ê–®–ë–û–†–î–ê –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–Ø ===');
            
            const teacherData = getTeacherData(teacherId);
            
            if (teacherData) {
                console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                populateTeacherInfo(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                populateStatistics(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –∫–ª–∞—Å—Å—ã
                populateClasses(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                populateSchedule(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
                populateRecentGrades(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
                populateHomework(teacherData);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è
                populateAnnouncements(teacherData);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏
                addAnimations();
            } else {
                console.error('‚ùå –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                showError('–î–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ
        function populateTeacherInfo(teacher) {
            document.getElementById('teacher-name').textContent = teacher.name;
            document.getElementById('teacher-subjects').textContent = teacher.subjects.join(', ');
            document.getElementById('teacher-experience').textContent = teacher.experience;
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function populateStatistics(teacher) {
            document.getElementById('total-students').textContent = teacher.statistics.totalStudents;
            document.getElementById('total-classes').textContent = teacher.statistics.classesCount;
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É
            const avgGrades = Object.values(teacher.statistics.averageGrades);
            const overallAvg = (avgGrades.reduce((a, b) => a + b, 0) / avgGrades.length).toFixed(1);
            document.getElementById('avg-grade').textContent = overallAvg;
            
            document.getElementById('lessons-week').textContent = teacher.statistics.lessonsPerWeek;
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
        function populateClasses(teacher) {
            const classesContainer = document.getElementById('teacher-classes');
            
            if (teacher.classes && teacher.classes.length > 0) {
                let html = '';
                teacher.classes.forEach(cls => {
                    html += `
                        <div class="class-card">
                            <div class="class-header">
                                <div>
                                    <div class="class-name">${cls.name}</div>
                                    <div style="color: #666; font-size: 0.9rem;">${cls.subject}</div>
                                </div>
                                <div class="students-count">${cls.students} —É—á.</div>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <button class="mui-btn" style="font-size: 0.8rem; padding: 4px 8px;" onclick="console.log('Grade clicked for ${cls.id}'); showGradeForm('${cls.id}', '${cls.name}')">
                                    <i class="material-icons" style="font-size: 0.9rem;">grade</i> –û—Ü–µ–Ω–∫–∏
                                </button>
                                <button class="mui-btn" style="font-size: 0.8rem; padding: 4px 8px;" onclick="console.log('Homework clicked for ${cls.id}'); showHomeworkForm('${cls.id}', '${cls.name}')">
                                    <i class="material-icons" style="font-size: 0.9rem;">assignment</i> –î–ó
                                </button>
                            </div>
                        </div>
                    `;
                });
                classesContainer.innerHTML = html;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                console.log('–ö–ª–∞—Å—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', teacher.classes);
                console.log('–§—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:', typeof showGradeForm, typeof showHomeworkForm);
            } else {
                classesContainer.innerHTML = '<p>–ö–ª–∞—Å—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        function populateSchedule(teacher) {
            const scheduleContainer = document.getElementById('today-schedule');
            const today = new Date().toLocaleDateString('ru-RU', { weekday: 'long' });
            
            const todaySchedule = teacher.schedule.filter(lesson => 
                lesson.day.toLowerCase() === today.toLowerCase()
            );
            
            if (todaySchedule.length > 0) {
                let html = '<ul class="schedule-list">';
                todaySchedule.forEach(lesson => {
                    html += `
                        <li class="schedule-item">
                            <div>
                                <div class="schedule-time">${lesson.time}</div>
                                <div>${lesson.class} - ${lesson.subject}</div>
                            </div>
                            <div class="schedule-room">${lesson.room}</div>
                        </li>
                    `;
                });
                html += '</ul>';
                scheduleContainer.innerHTML = html;
            } else {
                scheduleContainer.innerHTML = '<p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–Ω—è—Ç–∏–π –Ω–µ—Ç</p>';
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Ü–µ–Ω–æ–∫
        function populateRecentGrades(teacher) {
            const gradesContainer = document.getElementById('recent-grades');
            
            if (teacher.recentGrades && teacher.recentGrades.length > 0) {
                let html = '<ul class="grades-list">';
                teacher.recentGrades.slice(0, 5).forEach(grade => {
                    const gradeClass = grade.grade >= 4 ? 'grade-good' : grade.grade == 3 ? 'grade-mid' : 'grade-bad';
                    html += `
                        <li class="grade-item">
                            <div>
                                <div>${grade.student} (${grade.class})</div>
                                <div style="font-size: 0.8rem; color: #666;">${grade.topic}</div>
                            </div>
                            <div>
                                <span class="grade-value ${gradeClass}">${grade.grade}</span>
                                <div style="font-size: 0.8rem; color: #666;">${grade.date}</div>
                            </div>
                        </li>
                    `;
                });
                html += '</ul>';
                gradesContainer.innerHTML = html;
            } else {
                gradesContainer.innerHTML = '<p>–û—Ü–µ–Ω–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
        function populateHomework(teacher) {
            const homeworkContainer = document.getElementById('current-homework');
            
            if (teacher.homework && teacher.homework.length > 0) {
                let html = '<ul class="homework-list">';
                teacher.homework.forEach(hw => {
                    const priorityClass = hw.priority === 'high' ? 'priority-high' : 
                                        hw.priority === 'medium' ? 'priority-medium' : 'priority-low';
                    html += `
                        <li class="homework-item">
                            <div>
                                <div>${hw.class} - ${hw.subject}</div>
                                <div style="font-size: 0.9rem;">${hw.task}</div>
                            </div>
                            <div style="text-align: right;">
                                <span class="homework-priority ${priorityClass}">${hw.priority}</span>
                                <div style="font-size: 0.8rem; color: #666;">–¥–æ ${hw.dueDate}</div>
                            </div>
                        </li>
                    `;
                });
                html += '</ul>';
                homeworkContainer.innerHTML = html;
            } else {
                homeworkContainer.innerHTML = '<p>–ó–∞–¥–∞–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>';
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
        function populateAnnouncements(teacher) {
            const announcementsContainer = document.getElementById('teacher-announcements');
            
            if (teacher.announcements && teacher.announcements.length > 0) {
                let html = '';
                teacher.announcements.slice(0, 3).forEach(announcement => {
                    const importantClass = announcement.important ? 'important' : '';
                    html += `
                        <div class="announcement-item ${importantClass}">
                            <h5 style="margin: 0 0 5px 0;">${announcement.title}</h5>
                            <p style="margin: 0; font-size: 0.9rem;">${announcement.content}</p>
                            <div class="announcement-date">${announcement.date}</div>
                        </div>
                    `;
                });
                announcementsContainer.innerHTML = html;
            } else {
                announcementsContainer.innerHTML = '<p>–û–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>';
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
        function addAnimations() {
            const fadeInElements = document.querySelectorAll('.fade-in');
            fadeInElements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    element.style.transition = 'all 0.5s ease';
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
        function showError(message) {
            const container = document.querySelector('.dashboard-container');
            container.innerHTML = `
                <div class="MuiPaper-root" style="text-align: center; padding: 40px;">
                    <i class="material-icons" style="font-size: 4rem; color: #f44336; margin-bottom: 20px;">error</i>
                    <h3>–û—à–∏–±–∫–∞</h3>
                    <p>${message}</p>
                    <button class="mui-btn" onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º
        function showGradeForm(classId, className) {
            console.log('showGradeForm called with:', classId, className);
            console.log('showGradeModal function exists:', typeof showGradeModal);
            try {
                showGradeModal(classId, className);
            } catch (error) {
                console.error('Error in showGradeModal:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã –æ—Ü–µ–Ω–æ–∫: ' + error.message);
            }
        }

        function showHomeworkForm(classId, className) {
            console.log('showHomeworkForm called with:', classId, className);
            showHomeworkModal(classId, className);
        }

        // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏
        window.showGradeForm = showGradeForm;
        window.showHomeworkForm = showHomeworkForm;
        window.closeModal = closeModal;
        window.submitHomework = submitHomework;

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
        function showHomeworkModal(classId, className) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="homework-form">
                            <input type="hidden" id="hw-class-id" value="${classId}">
                            <input type="hidden" id="hw-class-name" value="${className}">
                            
                            <div class="form-group">
                                <label for="hw-subject">–ü—Ä–µ–¥–º–µ—Ç</label>
                                <select id="hw-subject" class="form-control" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</option>
                                    <option value="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                                    <option value="–§–∏–∑–∏–∫–∞">–§–∏–∑–∏–∫–∞</option>
                                    <option value="–†—É—Å—Å–∫–∏–π —è–∑—ã–∫">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</option>
                                    <option value="–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                                    <option value="–ò—Å—Ç–æ—Ä–∏—è">–ò—Å—Ç–æ—Ä–∏—è</option>
                                    <option value="–ë–∏–æ–ª–æ–≥–∏—è">–ë–∏–æ–ª–æ–≥–∏—è</option>
                                    <option value="–•–∏–º–∏—è">–•–∏–º–∏—è</option>
                                    <option value="–ì–µ–æ–≥—Ä–∞—Ñ–∏—è">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                                    <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                                    <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="hw-task">–ó–∞–¥–∞–Ω–∏–µ</label>
                                <textarea id="hw-task" class="form-control" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è" required></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="hw-due-date">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                                    <input type="date" id="hw-due-date" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="hw-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                    <select id="hw-priority" class="form-control" required>
                                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="hw-description">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                                <textarea id="hw-description" class="form-control" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç.–¥."></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                                <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            if (!document.getElementById('modal-styles')) {
                const style = document.createElement('style');
                style.id = 'modal-styles';
                style.textContent = `
                    .modal-overlay {
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0, 0, 0, 0.5);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 1000;
                        animation: fadeIn 0.3s ease;
                    }

                    .modal-content {
                        background: white;
                        border-radius: 12px;
                        width: 90%;
                        max-width: 600px;
                        max-height: 90vh;
                        overflow-y: auto;
                        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                        animation: slideUp 0.3s ease;
                    }

                    .modal-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 20px 24px;
                        border-bottom: 1px solid #e0e0e0;
                        background: linear-gradient(135deg, var(--primary-color) 0%, #303f9f 100%);
                        color: white;
                        border-radius: 12px 12px 0 0;
                    }

                    .modal-header h3 {
                        margin: 0;
                        font-size: 1.3rem;
                        font-weight: 500;
                    }

                    .modal-close {
                        background: none;
                        border: none;
                        font-size: 1.5rem;
                        color: white;
                        cursor: pointer;
                        padding: 0;
                        width: 30px;
                        height: 30px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 50%;
                        transition: background 0.3s ease;
                    }

                    .modal-close:hover {
                        background: rgba(255, 255, 255, 0.2);
                    }

                    .modal-body {
                        padding: 24px;
                    }

                    .form-group {
                        margin-bottom: 20px;
                    }

                    .form-row {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 16px;
                    }

                    .form-group label {
                        display: block;
                        margin-bottom: 8px;
                        font-weight: 500;
                        color: #333;
                    }

                    .form-control {
                        width: 100%;
                        padding: 12px 16px;
                        border: 2px solid #e0e0e0;
                        border-radius: 8px;
                        font-size: 1rem;
                        transition: all 0.3s ease;
                        box-sizing: border-box;
                        font-family: 'Roboto', sans-serif;
                    }

                    .form-control:focus {
                        outline: none;
                        border-color: var(--primary-color);
                        box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.1);
                    }

                    .form-control::placeholder {
                        color: #999;
                    }

                    .form-actions {
                        display: flex;
                        gap: 12px;
                        justify-content: flex-end;
                        margin-top: 24px;
                        padding-top: 20px;
                        border-top: 1px solid #e0e0e0;
                    }

                    .btn {
                        padding: 12px 24px;
                        border: none;
                        border-radius: 8px;
                        font-size: 1rem;
                        font-weight: 500;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    }

                    .btn-primary {
                        background: linear-gradient(135deg, var(--primary-color) 0%, #303f9f 100%);
                        color: white;
                        box-shadow: 0 4px 15px rgba(63, 81, 181, 0.3);
                    }

                    .btn-primary:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(63, 81, 181, 0.4);
                    }

                    .btn-secondary {
                        background: #f5f5f5;
                        color: #666;
                        border: 1px solid #e0e0e0;
                    }

                    .btn-secondary:hover {
                        background: #e0e0e0;
                    }

                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }

                    @keyframes slideUp {
                        from { 
                            opacity: 0;
                            transform: translateY(30px);
                        }
                        to { 
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }

                    @media (max-width: 768px) {
                        .form-row {
                            grid-template-columns: 1fr;
                        }
                        
                        .modal-content {
                            width: 95%;
                            margin: 10px;
                        }
                        
                        .form-actions {
                            flex-direction: column;
                        }
                        
                        .btn {
                            width: 100%;
                        }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(modal);

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è (–ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ DOM)
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('hw-due-date');
            if (dateInput) {
                dateInput.min = today;
                dateInput.value = today;
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            document.getElementById('homework-form').addEventListener('submit', function(e) {
                e.preventDefault();
                submitHomework();
            });
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.remove();
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è
        function submitHomework() {
            const classId = document.getElementById('hw-class-id').value;
            const className = document.getElementById('hw-class-name').value;
            const subject = document.getElementById('hw-subject').value;
            const task = document.getElementById('hw-task').value;
            const dueDate = document.getElementById('hw-due-date').value;
            const priority = document.getElementById('hw-priority').value;
            const description = document.getElementById('hw-description').value;

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!subject || !task || !dueDate) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }

            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
            const teacherId = localStorage.getItem('teacherId') || 'teacher1';
            const teacherData = getTeacherData(teacherId);

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
            const newHomework = {
                id: Date.now(),
                class: className,
                subject: subject,
                task: task,
                dueDate: dueDate,
                priority: priority,
                description: description,
                createdDate: new Date().toLocaleDateString('ru-RU'),
                teacher: teacherData.name
            };

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
            if (!teacherData.homework) {
                teacherData.homework = [];
            }
            teacherData.homework.unshift(newHomework);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            saveTeacherData(teacherId, teacherData);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showSuccessMessage('–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeModal();

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
            populateHomework(teacherData);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `
                <i class="material-icons">check_circle</i>
                <span>${message}</span>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
            if (!document.getElementById('success-styles')) {
                const style = document.createElement('style');
                style.id = 'success-styles';
                style.textContent = `
                    .success-message {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: #4caf50;
                        color: white;
                        padding: 16px 20px;
                        border-radius: 8px;
                        box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
                        display: flex;
                        align-items: center;
                        gap: 12px;
                        z-index: 2000;
                        animation: slideInRight 0.3s ease;
                        max-width: 400px;
                    }

                    .success-message i {
                        font-size: 1.5rem;
                    }

                    @keyframes slideInRight {
                        from {
                            opacity: 0;
                            transform: translateX(100px);
                        }
                        to {
                            opacity: 1;
                            transform: translateX(0);
                        }
                    }

                    @media (max-width: 768px) {
                        .success-message {
                            right: 10px;
                            left: 10px;
                            max-width: none;
                        }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(successDiv);

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.remove();
                }
            }, 3000);
        }

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
        function showGradeModal(classId, className) {
            console.log('showGradeModal started with:', classId, className);
            
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>–í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="grade-form">
                            <input type="hidden" id="grade-class-id" value="${classId}">
                            <input type="hidden" id="grade-class-name" value="${className}">
                            
                            <div class="form-group">
                                <label for="grade-student">–£—á–µ–Ω–∏–∫</label>
                                <select id="grade-student" class="form-control" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞</option>
                                    <option value="–ü–µ—Ç—Ä–æ–≤ –ê.–°.">–ü–µ—Ç—Ä–æ–≤ –ê.–°.</option>
                                    <option value="–ò–≤–∞–Ω–æ–≤ –ü.–ò.">–ò–≤–∞–Ω–æ–≤ –ü.–ò.</option>
                                    <option value="–°–∏–¥–æ—Ä–æ–≤–∞ –ú.–ò.">–°–∏–¥–æ—Ä–æ–≤–∞ –ú.–ò.</option>
                                    <option value="–ö–æ–∑–ª–æ–≤ –î.–í.">–ö–æ–∑–ª–æ–≤ –î.–í.</option>
                                    <option value="–ù–æ–≤–∏–∫–æ–≤–∞ –ï.–ê.">–ù–æ–≤–∏–∫–æ–≤–∞ –ï.–ê.</option>
                                    <option value="–ú–æ—Ä–æ–∑–æ–≤ –ö.–°.">–ú–æ—Ä–æ–∑–æ–≤ –ö.–°.</option>
                                    <option value="–í–æ–ª–∫–æ–≤–∞ –û.–ù.">–í–æ–ª–∫–æ–≤–∞ –û.–ù.</option>
                                    <option value="–õ–µ–±–µ–¥–µ–≤ –ê.–ú.">–õ–µ–±–µ–¥–µ–≤ –ê.–ú.</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="grade-subject">–ü—Ä–µ–¥–º–µ—Ç</label>
                                <select id="grade-subject" class="form-control" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</option>
                                    <option value="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                                    <option value="–§–∏–∑–∏–∫–∞">–§–∏–∑–∏–∫–∞</option>
                                    <option value="–†—É—Å—Å–∫–∏–π —è–∑—ã–∫">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</option>
                                    <option value="–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                                    <option value="–ò—Å—Ç–æ—Ä–∏—è">–ò—Å—Ç–æ—Ä–∏—è</option>
                                    <option value="–ë–∏–æ–ª–æ–≥–∏—è">–ë–∏–æ–ª–æ–≥–∏—è</option>
                                    <option value="–•–∏–º–∏—è">–•–∏–º–∏—è</option>
                                    <option value="–ì–µ–æ–≥—Ä–∞—Ñ–∏—è">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                                    <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                                    <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</option>
                                </select>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="grade-value">–û—Ü–µ–Ω–∫–∞</label>
                                    <select id="grade-value" class="form-control" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É</option>
                                        <option value="5">5 (–û—Ç–ª–∏—á–Ω–æ)</option>
                                        <option value="4">4 (–•–æ—Ä–æ—à–æ)</option>
                                        <option value="3">3 (–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ)</option>
                                        <option value="2">2 (–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="grade-date">–î–∞—Ç–∞</label>
                                    <input type="date" id="grade-date" class="form-control" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="grade-topic">–¢–µ–º–∞/–¢–∏–ø —Ä–∞–±–æ—Ç—ã</label>
                                <select id="grade-topic" class="form-control" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞–±–æ—Ç—ã</option>
                                    <option value="–£—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç">–£—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç</option>
                                    <option value="–ü–∏—Å—å–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞">–ü–∏—Å—å–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                                    <option value="–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                                    <option value="–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                                    <option value="–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                                    <option value="–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</option>
                                    <option value="–¢–µ—Å—Ç">–¢–µ—Å—Ç</option>
                                    <option value="–ü—Ä–æ–µ–∫—Ç">–ü—Ä–æ–µ–∫—Ç</option>
                                    <option value="–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</option>
                                    <option value="–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–∫–µ">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–∫–µ</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="grade-comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                                <textarea id="grade-comment" class="form-control" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ—Ü–µ–Ω–∫–µ"></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                                <button type="submit" class="btn btn-primary">–í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            console.log('Modal added to DOM');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ
            setTimeout(() => {
                const addedModal = document.querySelector('.modal-overlay');
                console.log('Modal found in DOM:', !!addedModal);
                if (addedModal) {
                    console.log('Modal HTML length:', addedModal.innerHTML.length);
                    console.log('Modal contains grade form:', addedModal.innerHTML.includes('–í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É'));
                    console.log('Modal computed style display:', window.getComputedStyle(addedModal).display);
                    console.log('Modal computed style visibility:', window.getComputedStyle(addedModal).visibility);
                    console.log('Modal computed style opacity:', window.getComputedStyle(addedModal).opacity);
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫–∞–∫ –≤ —Ñ–æ—Ä–º–µ –î–ó
                    addedModal.style.background = 'rgba(0, 0, 0, 0.5)';
                    addedModal.style.display = 'flex !important';
                    addedModal.style.alignItems = 'center !important';
                    addedModal.style.justifyContent = 'center !important';
                    addedModal.style.zIndex = '1000 !important';
                    
                    console.log('Applied debug styles to modal');
                }
            }, 100);

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('grade-date');
            if (dateInput) {
                dateInput.max = today; // –ù–µ–ª—å–∑—è –≤—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É –Ω–∞ –±—É–¥—É—â—É—é –¥–∞—Ç—É
                dateInput.value = today;
                console.log('Date set to:', today);
            } else {
                console.error('Date input not found!');
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            const form = document.getElementById('grade-form');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitGrade();
                });
                console.log('Form event listener added');
            } else {
                console.error('Form not found!');
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ü–µ–Ω–∫–∏
        function submitGrade() {
            const classId = document.getElementById('grade-class-id').value;
            const className = document.getElementById('grade-class-name').value;
            const student = document.getElementById('grade-student').value;
            const subject = document.getElementById('grade-subject').value;
            const grade = document.getElementById('grade-value').value;
            const date = document.getElementById('grade-date').value;
            const topic = document.getElementById('grade-topic').value;
            const comment = document.getElementById('grade-comment').value;

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!student || !subject || !grade || !date || !topic) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }

            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
            const teacherId = localStorage.getItem('teacherId') || 'teacher1';
            const teacherData = getTeacherData(teacherId);

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –æ—Ü–µ–Ω–∫—É
            const newGrade = {
                id: Date.now(),
                student: student,
                class: className,
                subject: subject,
                grade: grade,
                date: date,
                topic: topic,
                comment: comment,
                createdDate: new Date().toLocaleDateString('ru-RU'),
                teacher: teacherData.name
            };

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤ –æ—Ü–µ–Ω–æ–∫
            if (!teacherData.recentGrades) {
                teacherData.recentGrades = [];
            }
            teacherData.recentGrades.unshift(newGrade);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            saveTeacherData(teacherId, teacherData);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showSuccessMessage(`–û—Ü–µ–Ω–∫–∞ "${grade}" —É—Å–ø–µ—à–Ω–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∞ —É—á–µ–Ω–∏–∫—É ${student}!`);

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeModal();

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫
            populateRecentGrades(teacherData);
        }

        // –î–µ–ª–∞–µ–º submitGrade –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–π
        window.submitGrade = submitGrade;

        function logout() {
            localStorage.removeItem('teacherId');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>